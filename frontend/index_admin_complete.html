<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SamaCahier - Gestion des Cr√©dits</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://unpkg.com/axios@1.6.0/dist/axios.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            width: 100%;
            max-width: 1200px;
        }

        /* ===== LOGIN PAGE ===== */
        .login-container {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            padding: 40px;
            text-align: center;
        }

        .login-container h1 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        .login-container p {
            color: #666;
            margin-bottom: 30px;
            font-size: 1.1em;
        }

        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 600;
        }

        .form-group input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s;
        }

        .form-group input:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            width: 100%;
            padding: 12px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .btn-small {
            width: auto;
            padding: 6px 12px;
            font-size: 0.85em;
            margin-right: 5px;
        }

        .btn-primary {
            background: #667eea;
        }

        .btn-secondary {
            background: #999;
        }

        .btn-danger {
            background: #dc3545;
        }

        .btn-warning {
            background: #ffc107;
            color: #333;
        }

        .btn-success {
            background: #28a745;
        }

        .btn-info {
            background: #17a2b8;
        }

        .alert-error {
            background: #fee;
            color: #c33;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .alert-success {
            background: #efe;
            color: #3c3;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* ===== DASHBOARD PAGE ===== */
        .dashboard {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }

        .dashboard-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .dashboard-header h1 {
            font-size: 2em;
        }

        .header-left, .header-right {
            flex: 1;
        }

        .header-right {
            text-align: right;
        }

        .dashboard-content {
            padding: 30px;
        }

        /* ===== TABS ===== */
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid #e0e0e0;
        }

        .tab {
            padding: 10px 20px;
            background: none;
            border: none;
            border-bottom: 3px solid transparent;
            font-size: 1em;
            cursor: pointer;
            color: #666;
            transition: all 0.3s;
        }

        .tab.active {
            color: #667eea;
            border-bottom-color: #667eea;
        }

        /* ===== MODAL ===== */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal-content {
            background: white;
            border-radius: 15px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-content h3 {
            color: #667eea;
            margin-bottom: 20px;
        }

        .form-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .form-actions button {
            flex: 1;
        }

        /* ===== TABLE ===== */
        .table-responsive {
            overflow-x: auto;
            margin-top: 20px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
        }

        table thead {
            background: #f5f5f5;
        }

        table th {
            padding: 15px;
            text-align: left;
            font-weight: 600;
            color: #333;
            border-bottom: 2px solid #e0e0e0;
        }

        table td {
            padding: 12px 15px;
            border-bottom: 1px solid #e0e0e0;
        }

        table tbody tr:hover {
            background: #f9f9f9;
        }

        .status-active {
            background: #d4edda;
            color: #155724;
            padding: 4px 8px;
            border-radius: 4px;
        }

        .status-inactive {
            background: #f8d7da;
            color: #721c24;
            padding: 4px 8px;
            border-radius: 4px;
        }

        .status-archived {
            background: #e2e3e5;
            color: #383d41;
            padding: 4px 8px;
            border-radius: 4px;
        }

        .credit-status {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.85em;
            display: inline-block;
        }

        .status-pending {
            background: #fff3cd;
            color: #856404;
        }

        .status-partial {
            background: #cce5ff;
            color: #004085;
        }

        .status-paid {
            background: #d4edda;
            color: #155724;
        }

        .status-overdue {
            background: #f8d7da;
            color: #721c24;
        }

        /* ===== STATS GRID ===== */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-card h3 {
            font-size: 0.9em;
            opacity: 0.9;
            margin-bottom: 10px;
        }

        .stat-card .value {
            font-size: 2em;
            font-weight: bold;
        }

        .no-data {
            text-align: center;
            padding: 40px;
            color: #999;
        }

        .no-data p {
            font-size: 1.1em;
        }

        .fade-in {
            animation: fadeIn 0.3s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @media (max-width: 600px) {
            .login-container {
                padding: 20px;
            }

            .dashboard-header {
                flex-direction: column;
                text-align: center;
            }

            .header-right {
                text-align: center;
                margin-top: 15px;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            table {
                font-size: 0.9em;
            }

            table th, table td {
                padding: 8px;
            }

            .tabs {
                flex-wrap: wrap;
            }
        }
    </style>
</head>
<body>
    <div id="app">
        <!-- PAGE DE CONNEXION -->
        <div v-if="!isAuthenticated" class="login-container">
            <h1>üè™ SamaCahier</h1>
            <p>Gestion des Cr√©dits</p>
            
            <div v-if="loginError" class="alert-error">{{ loginError }}</div>

            <form @submit.prevent="loginUser">
                <div class="form-group">
                    <label for="username">üë§ Nom d'utilisateur</label>
                    <input 
                        v-model="loginForm.username" 
                        type="text" 
                        id="username"
                        placeholder="admin ou ali"
                        required
                    >
                </div>

                <div class="form-group">
                    <label for="password">üîë Mot de passe</label>
                    <input 
                        v-model="loginForm.password" 
                        type="password" 
                        id="password"
                        placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
                        required
                    >
                </div>

                <button type="submit" class="btn" :disabled="loading">
                    <span v-if="loading" class="loading"></span>
                    <span v-else>Se connecter</span>
                </button>
            </form>

            <div style="margin-top: 20px; color: #666; font-size: 0.9em;">
                <p><strong>Comptes de test :</strong></p>
                <p>Admin: <code>admin</code> / <code>admin123456</code></p>
                <p>Boutiquier: <code>ali</code> / <code>ali123456</code></p>
            </div>
        </div>

        <!-- TABLEAU DE BORD ADMIN -->
        <div v-if="isAuthenticated && userRole === 'admin'" class="dashboard fade-in">
            <div class="dashboard-header">
                <div class="header-left">
                    <h1>üîß Panneau Administrateur</h1>
                    <p>Gestion compl√®te du syst√®me</p>
                </div>
                <div class="header-right">
                    <button @click="logout" class="btn btn-danger" style="width: 150px;">D√©connexion</button>
                </div>
            </div>

            <div class="dashboard-content">
                <!-- ONGLETS ADMIN -->
                <div class="tabs">
                    <button @click="adminTab = 'boutiquiers'" :class="{ active: adminTab === 'boutiquiers' }" class="tab">
                        üë• Boutiquiers
                    </button>
                    <button @click="adminTab = 'clients'" :class="{ active: adminTab === 'clients' }" class="tab">
                        üë§ Clients
                    </button>
                    <button @click="adminTab = 'credits'" :class="{ active: adminTab === 'credits' }" class="tab">
                        üí∞ Cr√©dits
                    </button>
                </div>

                <!-- TAB 1: BOUTIQUIERS -->
                <div v-if="adminTab === 'boutiquiers'">
                    <h2 style="color: #667eea; margin-bottom: 20px;">üë• Gestion des Boutiquiers</h2>
                    
                    <button @click="showBoutiquierForm = true" class="btn btn-primary" style="width: 200px; margin-bottom: 20px;">
                        ‚ûï Cr√©er un Boutiquier
                    </button>

                    <!-- FORMULAIRE CR√âER BOUTIQUIER -->
                    <div v-if="showBoutiquierForm" class="modal">
                        <div class="modal-content">
                            <h3>Cr√©er un Boutiquier</h3>
                            <form @submit.prevent="createBoutiquier">
                                <div class="form-group">
                                    <label>Identifiant (username) *</label>
                                    <input v-model="boutiquierForm.username" type="text" placeholder="ex: ali" required>
                                </div>
                                <div class="form-group">
                                    <label>Email *</label>
                                    <input v-model="boutiquierForm.email" type="email" placeholder="ex: ali@boutique.com" required>
                                </div>
                                <div class="form-group">
                                    <label>Pr√©nom *</label>
                                    <input v-model="boutiquierForm.first_name" type="text" placeholder="Ali" required>
                                </div>
                                <div class="form-group">
                                    <label>Nom *</label>
                                    <input v-model="boutiquierForm.last_name" type="text" placeholder="Diallo" required>
                                </div>
                                <div class="form-group">
                                    <label>T√©l√©phone *</label>
                                    <input v-model="boutiquierForm.phone" type="tel" placeholder="77 123 45 67" required>
                                </div>
                                <div class="form-group">
                                    <label>Mot de passe *</label>
                                    <input v-model="boutiquierForm.password" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
                                </div>
                                <div class="form-group">
                                    <label>Confirmer mot de passe *</label>
                                    <input v-model="boutiquierForm.password_confirm" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
                                </div>
                                
                                <div v-if="boutiquierError" class="alert-error">{{ boutiquierError }}</div>
                                
                                <div class="form-actions">
                                    <button type="submit" class="btn btn-primary" :disabled="loadingBoutiquier">
                                        {{ loadingBoutiquier ? 'Cr√©ation...' : 'Cr√©er' }}
                                    </button>
                                    <button type="button" @click="showBoutiquierForm = false" class="btn btn-secondary">
                                        Annuler
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- TABLEAU BOUTIQUIERS -->
                    <div v-if="allBoutiquiers.length > 0" class="table-responsive">
                        <table>
                            <thead>
                                <tr>
                                    <th>Pr√©nom Nom</th>
                                    <th>Identifiant</th>
                                    <th>Email</th>
                                    <th>T√©l√©phone</th>
                                    <th>Clients</th>
                                    <th>Statut</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="bout in allBoutiquiers" :key="bout.id">
                                    <td>{{ bout.first_name }} {{ bout.last_name }}</td>
                                    <td><strong>{{ bout.username }}</strong></td>
                                    <td>{{ bout.email }}</td>
                                    <td>{{ bout.phone }}</td>
                                    <td>{{ bout.clients_count || 0 }}</td>
                                    <td>
                                        <span :class="'status-' + bout.status" style="padding: 4px 8px; border-radius: 4px;">
                                            {{ bout.status }}
                                        </span>
                                    </td>
                                    <td>
                                        <button @click="toggleBoutiquierActive(bout)" class="btn btn-small" 
                                            :class="bout.is_active ? 'btn-warning' : 'btn-success'">
                                            {{ bout.is_active ? 'üîí D√©sac' : 'üîì Activ' }}
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div v-else class="alert-error">
                        Aucun boutiquier cr√©√©
                    </div>
                </div>

                <!-- TAB 2: CLIENTS -->
                <div v-if="adminTab === 'clients'">
                    <h2 style="color: #667eea; margin-bottom: 20px;">üë§ Tous les Clients</h2>
                    
                    <div v-if="allClients.length > 0" class="table-responsive">
                        <table>
                            <thead>
                                <tr>
                                    <th>Nom</th>
                                    <th>Boutiquier</th>
                                    <th>T√©l√©phone</th>
                                    <th>Code</th>
                                    <th>Statut</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="client in allClients" :key="client.id">
                                    <td>{{ client.name }}</td>
                                    <td>{{ client.boutiquier_name || 'N/A' }}</td>
                                    <td>{{ client.phone }}</td>
                                    <td><strong>{{ client.access_code }}</strong></td>
                                    <td>
                                        <span :class="'status-' + (client.status || 'active')" style="padding: 4px 8px; border-radius: 4px;">
                                            {{ client.status || 'active' }}
                                        </span>
                                    </td>
                                    <td>
                                        <button @click="toggleClientActive(client)" class="btn btn-small" 
                                            :class="client.is_active ? 'btn-warning' : 'btn-success'">
                                            {{ client.is_active ? 'üîí' : 'üîì' }}
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div v-else class="alert-error">
                        Aucun client trouv√©
                    </div>
                </div>

                <!-- TAB 3: CR√âDITS -->
                <div v-if="adminTab === 'credits'">
                    <h2 style="color: #667eea; margin-bottom: 20px;">üí∞ Tous les Cr√©dits</h2>
                    
                    <div v-if="allCredits.length > 0" class="table-responsive">
                        <table>
                            <thead>
                                <tr>
                                    <th>Client</th>
                                    <th>Boutiquier</th>
                                    <th>Montant</th>
                                    <th>Pay√©</th>
                                    <th>Restant</th>
                                    <th>Statut</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="credit in allCredits" :key="credit.id">
                                    <td>{{ credit.client_name }}</td>
                                    <td>{{ credit.boutiquier_name }}</td>
                                    <td>{{ formatCurrency(credit.amount) }}</td>
                                    <td>{{ formatCurrency(credit.paid_amount) }}</td>
                                    <td>{{ formatCurrency(credit.amount - credit.paid_amount) }}</td>
                                    <td>
                                        <span :class="'status-' + credit.status" style="padding: 4px 8px; border-radius: 4px;">
                                            {{ credit.status }}
                                        </span>
                                    </td>
                                    <td>
                                        <button @click="toggleCreditActive(credit)" class="btn btn-small" 
                                            :class="credit.is_active ? 'btn-warning' : 'btn-success'">
                                            {{ credit.is_active ? 'üîí' : 'üîì' }}
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div v-else class="alert-error">
                        Aucun cr√©dit trouv√©
                    </div>
                </div>
            </div>
        </div>

        <!-- TABLEAU DE BORD BOUTIQUIER -->
        <div v-else-if="isAuthenticated && userRole === 'boutiquier'" class="dashboard fade-in">
            <div class="dashboard-header">
                <div class="header-left">
                    <h1>üìä Mon Boutique</h1>
                    <p>Gestion de ma boutique</p>
                </div>
                <div class="header-right">
                    <p><strong>{{ username }}</strong></p>
                    <button @click="logout" class="btn btn-danger" style="width: 150px; margin-top: 10px;">D√©connexion</button>
                </div>
            </div>

            <div class="dashboard-content">
                <p style="text-align: center; color: #666;">Interface boutiquier en d√©veloppement...</p>
            </div>
        </div>

        <!-- TABLEAU DE BORD CLIENT -->
        <div v-else-if="isAuthenticated && userRole === 'client'" class="dashboard fade-in">
            <div class="dashboard-header">
                <div class="header-left">
                    <h1>üí≥ Mes Cr√©dits</h1>
                    <p>Suivi de mes dettes</p>
                </div>
                <div class="header-right">
                    <button @click="logout" class="btn btn-danger" style="width: 150px;">D√©connexion</button>
                </div>
            </div>

            <div class="dashboard-content">
                <p style="text-align: center; color: #666;">Interface client en d√©veloppement...</p>
            </div>
        </div>
    </div>

    <script>
        const { createApp } = Vue;

        createApp({
            data() {
                return {
                    // Authentification
                    isAuthenticated: false,
                    userRole: null,
                    username: '',
                    loading: false,
                    loginError: '',
                    loginForm: {
                        username: '',
                        password: ''
                    },
                    accessToken: '',

                    // Admin
                    adminTab: 'boutiquiers',
                    showBoutiquierForm: false,
                    allBoutiquiers: [],
                    allClients: [],
                    allCredits: [],
                    boutiquierForm: {
                        username: '',
                        email: '',
                        first_name: '',
                        last_name: '',
                        phone: '',
                        password: '',
                        password_confirm: ''
                    },
                    boutiquierError: '',
                    loadingBoutiquier: false,
                };
            },
            methods: {
                async loginUser() {
                    this.loading = true;
                    this.loginError = '';

                    try {
                        const response = await axios.post(
                            'http://localhost:8000/api/users/token/',
                            this.loginForm
                        );

                        this.accessToken = response.data.access;
                        localStorage.setItem('token', this.accessToken);
                        
                        // D√©terminer le r√¥le
                        if (response.data.is_superuser) {
                            this.userRole = 'admin';
                        } else {
                            this.userRole = response.data.role || 'boutiquier';
                        }

                        this.username = response.data.username;
                        this.isAuthenticated = true;

                        // Charger donn√©es admin si admin
                        if (this.userRole === 'admin') {
                            await this.loadAdminDashboard();
                        }

                    } catch (error) {
                        this.loginError = '‚ùå Identifiants incorrects';
                    } finally {
                        this.loading = false;
                    }
                },

                // ============ ADMIN: CHARGER TOUS LES DONN√âES ============

                async loadAdminDashboard() {
                    const headers = { Authorization: `Bearer ${this.accessToken}` };
                    
                    try {
                        // Charger boutiquiers
                        const boutRes = await axios.get(
                            'http://localhost:8000/api/admin/boutiquiers/',
                            { headers }
                        );
                        this.allBoutiquiers = boutRes.data;
                        
                        // Charger clients
                        const clientRes = await axios.get(
                            'http://localhost:8000/api/clients/',
                            { headers }
                        );
                        this.allClients = clientRes.data.results || clientRes.data;
                        
                        // Charger cr√©dits
                        const creditRes = await axios.get(
                            'http://localhost:8000/api/credits/',
                            { headers }
                        );
                        this.allCredits = creditRes.data.results || creditRes.data;
                        
                    } catch (error) {
                        console.error('Erreur chargement admin:', error);
                    }
                },

                // ============ CR√âER BOUTIQUIER ============

                async createBoutiquier() {
                    if (this.boutiquierForm.password !== this.boutiquierForm.password_confirm) {
                        this.boutiquierError = 'Les mots de passe ne correspondent pas';
                        return;
                    }
                    
                    if (this.boutiquierForm.password.length < 8) {
                        this.boutiquierError = 'Le mot de passe doit avoir au moins 8 caract√®res';
                        return;
                    }
                    
                    this.loadingBoutiquier = true;
                    this.boutiquierError = '';
                    
                    try {
                        const response = await axios.post(
                            'http://localhost:8000/api/users/',
                            {
                                ...this.boutiquierForm,
                                role: 'boutiquier'
                            },
                            {
                                headers: { Authorization: `Bearer ${this.accessToken}` }
                            }
                        );
                        
                        this.allBoutiquiers.push(response.data);
                        this.showBoutiquierForm = false;
                        this.boutiquierForm = {
                            username: '',
                            email: '',
                            first_name: '',
                            last_name: '',
                            phone: '',
                            password: '',
                            password_confirm: ''
                        };
                        
                    } catch (error) {
                        if (error.response?.data?.username) {
                            this.boutiquierError = 'Cet identifiant existe d√©j√†';
                        } else if (error.response?.data?.email) {
                            this.boutiquierError = 'Cet email existe d√©j√†';
                        } else {
                            this.boutiquierError = 'Erreur lors de la cr√©ation';
                        }
                    } finally {
                        this.loadingBoutiquier = false;
                    }
                },

                // ============ DESACTIVER/ACTIVER BOUTIQUIER ============

                async toggleBoutiquierActive(boutiquier) {
                    if (!confirm('√ätes-vous s√ªr ?')) return;
                    
                    try {
                        const newStatus = boutiquier.is_active ? 'inactive' : 'active';
                        
                        await axios.patch(
                            `http://localhost:8000/api/admin/boutiquiers/${boutiquier.id}/toggle-status/`,
                            { status: newStatus },
                            { headers: { Authorization: `Bearer ${this.accessToken}` } }
                        );
                        
                        boutiquier.is_active = !boutiquier.is_active;
                        boutiquier.status = newStatus;
                        
                    } catch (error) {
                        alert('Erreur: ' + error.message);
                    }
                },

                // ============ DESACTIVER/ACTIVER CLIENT ============

                async toggleClientActive(client) {
                    if (!confirm('√ätes-vous s√ªr ?')) return;
                    
                    try {
                        const newStatus = client.is_active ? 'inactive' : 'active';
                        
                        await axios.patch(
                            `http://localhost:8000/api/admin/clients/${client.id}/toggle-status/`,
                            { status: newStatus },
                            { headers: { Authorization: `Bearer ${this.accessToken}` } }
                        );
                        
                        client.is_active = !client.is_active;
                        client.status = newStatus;
                        
                    } catch (error) {
                        alert('Erreur: ' + error.message);
                    }
                },

                // ============ DESACTIVER/ACTIVER CR√âDIT ============

                async toggleCreditActive(credit) {
                    if (!confirm('√ätes-vous s√ªr ?')) return;
                    
                    try {
                        await axios.patch(
                            `http://localhost:8000/api/admin/credits/${credit.id}/toggle-status/`,
                            { is_active: !credit.is_active },
                            { headers: { Authorization: `Bearer ${this.accessToken}` } }
                        );
                        
                        credit.is_active = !credit.is_active;
                        
                    } catch (error) {
                        alert('Erreur: ' + error.message);
                    }
                },

                logout() {
                    this.isAuthenticated = false;
                    this.userRole = null;
                    this.username = '';
                    this.accessToken = '';
                    this.allBoutiquiers = [];
                    this.allClients = [];
                    this.allCredits = [];
                    localStorage.removeItem('token');
                    this.loginForm = { username: '', password: '' };
                },

                formatCurrency(value) {
                    return new Intl.NumberFormat('fr-FR', {
                        style: 'currency',
                        currency: 'XOF'
                    }).format(value || 0);
                }
            }
        }).mount('#app');
    </script>
</body>
</html>
